<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Email - Studio30</title>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
        }
        button:hover {
            opacity: 0.9;
        }
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid #2196F3;
        }
        .log {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
            white-space: pre-wrap;
        }
        .success {
            color: #4caf50;
        }
        .error {
            color: #f44336;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Teste de Email - Studio30</h1>

        <div class="info">
            <strong>üìß Destino:</strong> studio30closet@gmail.com<br>
            <strong>‚öôÔ∏è M√©todo:</strong> EmailJS<br>
            <strong>üîë Service ID:</strong> service_3h2tyup
        </div>

        <button id="testBtn" onclick="testEmail()">
            üìß Enviar Email de Teste
        </button>

        <div class="log" id="log"></div>
    </div>

    <script>
        const SERVICE_ID = 'service_3h2tyup'
        const TEMPLATE_ID = 'template_wghvxdb'
        const PUBLIC_KEY = 'DkaN2O0h-27lkoW94'

        function log(message, isError = false) {
            const logDiv = document.getElementById('log')
            const timestamp = new Date().toLocaleTimeString('pt-BR')
            const className = isError ? 'error' : 'success'
            logDiv.innerHTML += \`<span class="\${className}">[\ ${timestamp}] \${message}</span>\n\`
            logDiv.scrollTop = logDiv.scrollHeight
        }

        async function testEmail() {
            const btn = document.getElementById('testBtn')
            btn.disabled = true
            btn.textContent = 'üì§ Enviando...'

            document.getElementById('log').innerHTML = ''
            log('üöÄ Iniciando teste de envio de email...')

            const templateParams = {
                subject: \`üß™ TESTE - Nova malinha para Cliente Teste [3 pe√ßas]\`,
                customer_name: 'Cliente Teste',
                customer_email: 'teste@example.com',
                items_count: 3,
                order_link: 'https://studio30closet.com.br/admin/malinhas',
                order_id: 999,
                to_email: 'studio30closet@gmail.com'
            }

            log('üìã Dados do email:')
            log(\`   Para: \${templateParams.to_email}\`)
            log(\`   Cliente: \${templateParams.customer_name}\`)
            log(\`   Pe√ßas: \${templateParams.items_count}\`)
            log(\`   Order ID: \${templateParams.order_id}\`)
            log('')

            try {
                log('üìß Enviando email via EmailJS...')

                const response = await emailjs.send(
                    SERVICE_ID,
                    TEMPLATE_ID,
                    templateParams,
                    PUBLIC_KEY
                )

                log('')
                log('‚úÖ EMAIL ENVIADO COM SUCESSO!')
                log(\`   Status: \${response.status}\`)
                log(\`   Texto: \${response.text}\`)
                log('')
                log('üì¨ Verifique o email: studio30closet@gmail.com')
                log('   (Pode levar alguns segundos para chegar)')

                btn.textContent = '‚úÖ Email Enviado!'
                btn.style.background = '#4caf50'

            } catch (error) {
                log('')
                log('‚ùå ERRO AO ENVIAR EMAIL!', true)
                log(\`   Nome: \${error.name}\`, true)
                log(\`   Mensagem: \${error.message}\`, true)
                if (error.text) log(\`   Texto: \${error.text}\`, true)
                log('')
                log('üîç Poss√≠veis causas:', true)
                log('   - Chaves do EmailJS incorretas', true)
                log('   - Template n√£o configurado', true)
                log('   - Problema de conex√£o', true)

                btn.textContent = '‚ùå Erro - Tentar Novamente'
                btn.style.background = '#f44336'
                btn.disabled = false
            }
        }

        log('‚öôÔ∏è Inicializando EmailJS...')
        log(\`   Public Key: \${PUBLIC_KEY}\`)
        log('')
        log('‚úÖ Pronto para testar!')
        log('   Clique no bot√£o acima para enviar um email de teste.')
        log('')
    </script>
</body>
</html>
